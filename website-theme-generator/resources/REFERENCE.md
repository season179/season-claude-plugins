# Website Theme Generator - Technical Reference

Complete technical documentation for the website theme generator skill.

## Table of Contents

1. [Analysis Data Structure](#analysis-data-structure)
2. [Theme Output Format](#theme-output-format)
3. [Color Selection Strategy](#color-selection-strategy)
4. [Typography Strategy](#typography-strategy)
5. [Spacing System](#spacing-system)
6. [Design Aesthetic Analysis](#design-aesthetic-analysis)
7. [Customization Guide](#customization-guide)

---

## Analysis Data Structure

The `analysis.json` file generated by `analyze_website.py` contains the following structure:

```json
{
  "url": "https://example.com",
  "title": "Example Domain",
  "colors": {
    "raw_colors": ["rgb(1, 2, 3)", "rgb(4, 5, 6)", ...],
    "analysis": {
      "total_unique_colors": 125,
      "most_common_colors": [
        {"color": "#010203", "count": 450},
        {"color": "#040506", "count": 320},
        ...
      ]
    }
  },
  "fonts": [
    "Inter, sans-serif",
    "SF Pro Display, system-ui, sans-serif",
    ...
  ],
  "spacing": {
    "raw_spacing": ["16px", "24px", "32px", ...],
    "analysis": {
      "most_common_spacing": [
        {"value": "16px", "count": 235},
        {"value": "24px", "count": 189},
        ...
      ]
    }
  },
  "border_radius": ["4px", "8px", "16px", ...],
  "screenshots": {
    "full_page": "/path/to/screenshot_full.png",
    "viewport": "/path/to/screenshot_viewport.png"
  }
}
```

### Data Field Explanations

**`colors.raw_colors`** (limited to first 50):
- Raw RGB/RGBA color values extracted from computed styles
- Includes colors from: text, backgrounds, borders
- May contain duplicates and variations

**`colors.analysis.most_common_colors`** (top 10):
- Converted to hex format for consistency
- Sorted by frequency of occurrence
- Count represents number of elements using this color
- Most useful for identifying brand colors

**`fonts`**:
- Font family stacks from computed styles
- Includes fallback fonts (e.g., "Inter, sans-serif")
- May include system fonts, web fonts, and generic families
- Order is not significant

**`spacing.analysis.most_common_spacing`** (top 10):
- Extracted from margins and padding
- Converted to pixel values
- Sorted by frequency
- Useful for identifying spacing scale

**`border_radius`**:
- Unique border-radius values found on page
- Not sorted or filtered
- Use to identify roundness patterns

---

## Theme Output Format

Present generated themes using this structured format:

```markdown
# Design Theme: [Website Name/URL]

## Overview
[1-2 sentence summary of the overall aesthetic and purpose]

## Color Palette

### Primary Colors
- **Primary**: #hexcode - [Description: e.g., "Bold blue for CTAs and links"]
- **Secondary**: #hexcode - [Description: e.g., "Dark navy for headers"]

### Accent Colors
- **Accent 1**: #hexcode - [Description: e.g., "Vibrant green for success states"]
- **Accent 2**: #hexcode - [Optional additional accent]

### Neutral Colors
- **Background**: #hexcode - [Description: e.g., "Light gray background"]
- **Surface**: #hexcode - [Description: e.g., "White card surfaces"]
- **Text Primary**: #hexcode - [Description: e.g., "Near-black for body text"]
- **Text Secondary**: #hexcode - [Description: e.g., "Medium gray for secondary text"]
- **Border**: #hexcode - [Description: e.g., "Light gray for subtle borders"]

### Color Usage Notes
[Explain how colors are applied, any gradients, overlays, or special effects observed]

## Typography

### Font Families
- **Headings**: [Font Name/Stack] - [Description: e.g., "Bold, geometric sans-serif"]
- **Body**: [Font Name/Stack] - [Description: e.g., "Readable humanist sans-serif"]
- **Monospace**: [Font Name/Stack] - [If code blocks present]

### Font Pairing Analysis
[Explain why these fonts work together, their characteristics, mood they create]

### Typography Scale
[If discernible from screenshots]
- **H1**: [Approximate size and weight]
- **H2**: [Approximate size and weight]
- **Body**: [Approximate size and weight]
- **Small**: [Approximate size and weight]

### Typography Notes
[Line height patterns, letter spacing, text transform usage, etc.]

## Spacing System

### Base Unit
[Identify the base spacing unit, typically 4px or 8px]

### Spacing Scale
[List the spacing values in order, showing the pattern]
- **xs**: [value]px
- **sm**: [value]px
- **md**: [value]px
- **lg**: [value]px
- **xl**: [value]px
- **2xl**: [value]px
- **3xl**: [value]px

### Spacing Pattern Analysis
[Describe if it's a consistent scale, multiplicative progression, or custom values]

## Border Radius

### Roundness Scale
- **Small (buttons, inputs)**: [value]px
- **Medium (cards, containers)**: [value]px
- **Large (modals, images)**: [value]px
- **Full (pills, avatars)**: [value]px or 50%

### Roundness Philosophy
[Describe if the site uses sharp corners, subtle rounds, or heavily rounded elements]

## Design Style

### Aesthetic Description
[2-3 sentences describing the overall visual style]

**Style Keywords**: [e.g., "Modern, Minimal, Bold, Playful, Corporate, Elegant"]

**Design Principles Observed**:
- [Principle 1: e.g., "High contrast for accessibility"]
- [Principle 2: e.g., "Generous white space for breathing room"]
- [Principle 3: e.g., "Consistent visual rhythm through repetition"]

### Layout Patterns
[Describe common layout approaches: grid systems, flexbox usage, container widths]

### Component Patterns
[Note any recurring component styles: buttons, cards, forms, navigation]

## Implementation Notes

### CSS Custom Properties (Example)
```css
:root {
  /* Colors */
  --color-primary: #hexcode;
  --color-secondary: #hexcode;

  /* Spacing */
  --spacing-xs: [value]px;
  --spacing-sm: [value]px;

  /* Typography */
  --font-heading: [font-stack];
  --font-body: [font-stack];

  /* Border Radius */
  --radius-sm: [value]px;
  --radius-md: [value]px;
}
```

### Tailwind Config (Example)
```javascript
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: '#hexcode',
        secondary: '#hexcode',
      },
      fontFamily: {
        heading: [font-stack],
        body: [font-stack],
      },
      spacing: {
        // Custom spacing scale
      }
    }
  }
}
```

### Design Tokens (JSON)
```json
{
  "color": {
    "primary": {"value": "#hexcode"},
    "secondary": {"value": "#hexcode"}
  },
  "font": {
    "heading": {"value": "font-stack"},
    "body": {"value": "font-stack"}
  }
}
```

## Special Observations

[Any unique design decisions worth noting:]
- Animation and interaction patterns
- Micro-interactions observed
- Accessibility considerations visible
- Responsive design approaches
- Dark mode variations (if visible)
- Brand personality elements
```

---

## Color Selection Strategy

### Understanding Color Data

When you receive color analysis data, you'll see:
- **High-frequency neutrals**: Whites, grays, blacks (often the most common)
- **Brand colors**: Usually mid-frequency, applied to key elements
- **Accent colors**: Lower frequency, used sparingly for emphasis

### Identifying Primary Color

**Look for the most prominent non-neutral color:**

1. **Filter out common neutrals** from the top colors:
   - Pure white (#ffffff, #fefefe, #fdfdfd)
   - Pure black (#000000, #0101010)
   - Light grays (#f5f5f5, #f0f0f0, #e5e5e5)
   - Dark grays (#333333, #1a1a1a, #2a2a2a)

2. **Examine remaining colors** in frequency order:
   - The most frequent saturated color is often the primary
   - Usually appears in: navigation, buttons, links, brand elements

3. **Validate with screenshots**:
   - Does this color appear prominently in the UI?
   - Is it used for important interactive elements?
   - Does it feel like the "brand color"?

### Selecting Secondary and Accent Colors

**Secondary colors** (2-3 colors):
- Complement the primary color
- Often used for secondary CTAs, highlights, sections
- May be variations of primary (lighter/darker) or complementary hues

**Accent colors** (1-2 colors):
- Used sparingly for emphasis
- Success/error states, notifications, special highlights
- Often high contrast with primary/secondary

### Building the Neutral Palette

**From the color data, identify:**

1. **Background colors**: Lightest neutrals (#ffffff, #f9f9f9, #f5f5f5)
2. **Surface colors**: Card/panel backgrounds, slightly darker than background
3. **Border colors**: Subtle grays for separators (#e0e0e0, #d0d0d0)
4. **Text colors**:
   - Primary text: Dark grays or near-black (#1a1a1a, #2a2a2a)
   - Secondary text: Medium grays (#666666, #757575)
   - Disabled text: Light grays (#a0a0a0, #c0c0c0)

### Color Relationship Checks

**Ensure your palette makes sense:**
- Primary + secondary should not clash
- Accent colors should stand out from primary/secondary
- Neutral progression should be smooth (not jarring jumps)
- Text colors should have sufficient contrast with backgrounds (WCAG AA: 4.5:1 for body, 3:1 for large text)

---

## Typography Strategy

### Interpreting Font Data

Font arrays from analysis show computed font stacks:
```javascript
[
  "Inter, -apple-system, BlinkMacSystemFont, sans-serif",
  "SF Pro Display, system-ui, sans-serif",
  "Consolas, Monaco, monospace"
]
```

### Identifying Primary Fonts

**Heading font**:
- Often appears first or second in the array
- May be distinct from body font (but not always)
- Look for: display fonts, bold weights, geometric sans-serifs

**Body font**:
- Most common font across the page
- Usually optimized for readability
- Look for: humanist sans-serifs, traditional serifs

**Special cases**:
- **Monospace**: For code snippets (Consolas, Monaco, Fira Code)
- **Display**: For large hero text (may be different from heading font)

### Font Pairing Principles

**Great font pairings have**:
1. **Contrast**: Serif + sans-serif, or geometric + humanist
2. **Harmony**: Similar x-heights, similar stroke widths
3. **Purpose**: Display + text, heading + body roles are clear

**Common successful patterns**:
- **Modern SaaS**: Inter (headings + body) - monofont everywhere
- **Editorial**: Serif headings (Playfair, Merriweather) + Sans body (Open Sans, Lato)
- **Tech**: Geometric sans headings (Montserrat, Poppins) + Humanist body (Inter, System UI)
- **Minimal**: Single font family with weight variation

### Handling System Fonts

If you see system font stacks:
```
-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, ...
```

**Describe as**: "System font stack (San Francisco on macOS, Segoe UI on Windows, Roboto on Android)"

**Reasoning**: Performance, native feel, consistency with OS

### Typography Scale Detection

**From screenshots, estimate**:
- Heading hierarchy (H1 > H2 > H3 size relationships)
- Body text size (usually 14-18px)
- Small text size (captions, labels, usually 12-14px)

**Common scales**:
- **Minor Third (1.2×)**: 12, 14, 17, 20, 24, 29, 35, 42
- **Major Third (1.25×)**: 12, 15, 19, 24, 30, 37, 46, 58
- **Perfect Fourth (1.333×)**: 12, 16, 21, 28, 37, 50, 67, 89

---

## Spacing System

### Analyzing Spacing Data

The spacing analysis provides the most common spacing values:
```json
{
  "most_common_spacing": [
    {"value": "16px", "count": 235},
    {"value": "24px", "count": 189},
    {"value": "32px", "count": 143},
    {"value": "8px", "count": 98},
    {"value": "48px", "count": 76}
  ]
}
```

### Identifying the Base Unit

**Look for the smallest frequent value:**
- Often 4px or 8px (sometimes 16px for bold systems)
- Should divide evenly into larger values
- Represents the fundamental grid unit

**Test if values follow a pattern:**
- **Linear scale**: 8, 16, 24, 32, 40, 48 (base × n)
- **Exponential scale**: 4, 8, 16, 32, 64 (base × 2^n)
- **Custom scale**: 4, 8, 12, 16, 24, 32, 48, 64 (Tailwind-style)

### Creating a Spacing Scale

**From the data, build a scale:**

1. **Identify the base unit** (smallest value)
2. **List all spacing values** in ascending order
3. **Look for patterns**: Are values multiples of base? Fibonacci? Custom?
4. **Fill gaps**: If you see 8, 24, 32 but not 16, add 16 to scale
5. **Name the scale**: xs, sm, md, lg, xl, 2xl, etc.

**Example transformation:**

Data: `8px (98), 16px (235), 24px (189), 32px (143), 48px (76)`

Scale:
```
xs:  8px   (base)
sm:  16px  (base × 2)
md:  24px  (base × 3)
lg:  32px  (base × 4)
xl:  48px  (base × 6)
2xl: 64px  (base × 8, extrapolated)
```

### Spacing Application Patterns

**Observe from screenshots:**
- **Component spacing**: Internal padding of buttons, cards
- **Layout spacing**: Gaps between sections, columns
- **Micro spacing**: Between label and input, icon and text
- **Macro spacing**: Page margins, section padding

---

## Design Aesthetic Analysis

Combine visual screenshot analysis with extracted data to describe the design aesthetic.

### Visual Analysis Checklist

When examining screenshots, note:

**Layout**:
- Grid-based or fluid?
- Fixed-width containers or full-width sections?
- Asymmetric or symmetric layouts?
- Amount of white space (generous or compact?)

**Visual Weight**:
- Bold and high-contrast or subtle and minimal?
- Heavy use of color or mostly neutral?
- Large typography or conservative sizing?

**Imagery**:
- Photography style (realistic, illustrations, abstract?)
- Image treatment (rounded corners, shadows, full-bleed?)
- Icon style (outlined, filled, duotone?)

**Interactivity**:
- Button style (bold, subtle, pill-shaped, squared?)
- Hover states visible?
- Shadows and depth or flat design?

### Style Keywords

**Choose 3-5 keywords** that describe the aesthetic:
- **Modern**: Clean, current, trendy
- **Minimal**: Lots of white space, few elements
- **Bold**: High contrast, strong colors, large type
- **Playful**: Bright colors, rounded shapes, illustrations
- **Corporate**: Professional, conservative, trustworthy
- **Elegant**: Refined, sophisticated, subtle
- **Technical**: Precise, grid-based, monospace fonts
- **Organic**: Soft shapes, natural colors, flowing layouts

### Writing the Design Style Section

**Structure**:

1. **Opening sentence**: "The design is [primary keyword] with [supporting keywords], creating a [mood/feeling]."

2. **Design principles** (2-3 bullet points):
   - Specific observations about the design approach
   - Connect visual choices to intent (e.g., "High contrast for accessibility")

3. **Overall impression**: How does the design make you feel? What brand personality does it convey?

**Example**:
> The design is modern and minimal with generous white space and restrained color usage, creating a calm, focused experience. Key principles include: high contrast typography for readability, consistent use of primary blue for interactive elements, and a clear visual hierarchy through size and weight variation. The overall impression is professional yet approachable, suggesting a trustworthy brand that values clarity and user experience.

---

## Customization Guide

### Modifying the Analyzer Script

The `analyze_website.py` script can be customized for specific analysis needs.

#### Adding Custom Extraction Functions

**Example: Extract box-shadow patterns**

```python
async def extract_shadow_patterns(page):
    """Extract box-shadow values from elements"""
    shadows = await page.evaluate("""
        () => {
            const shadows = new Set();
            const elements = document.querySelectorAll('*');

            elements.forEach(el => {
                const styles = window.getComputedStyle(el);
                const boxShadow = styles.boxShadow;
                if (boxShadow && boxShadow !== 'none') {
                    shadows.add(boxShadow);
                }
            });

            return Array.from(shadows);
        }
    """)
    return shadows

# Add to main analyze_website function
shadows = await extract_shadow_patterns(page)
results['shadows'] = shadows
```

#### Custom Viewport Sizes

**For mobile analysis:**

```python
# In analyze_website function, after creating page:
await page.set_viewport_size({"width": 375, "height": 812})  # iPhone X
```

#### Adjusting Timeouts

**For slow-loading sites:**

```python
await page.goto(url, wait_until='networkidle', timeout=60000)  # 60 seconds
```

#### Additional CSS Properties

**Extract more styling data:**

```python
# Add properties to extract in color/spacing functions
properties = [
    'color', 'backgroundColor', 'borderColor',
    'outlineColor',  # NEW
    'textDecorationColor',  # NEW
    'caretColor'  # NEW
]
```

### Creating Custom Output Formats

#### Export as CSS Custom Properties

```python
def export_css_variables(analysis_json):
    """Convert analysis to CSS custom properties"""
    colors = analysis_json['colors']['analysis']['most_common_colors']

    css = ":root {\n"
    for i, color_data in enumerate(colors[:10]):
        css += f"  --color-{i+1}: {color_data['color']};\n"
    css += "}\n"

    return css
```

#### Export as Tailwind Config

```python
def export_tailwind_config(analysis_json):
    """Convert analysis to Tailwind configuration"""
    colors = analysis_json['colors']['analysis']['most_common_colors']

    config = {
        "theme": {
            "extend": {
                "colors": {
                    f"brand-{i+1}": color_data['color']
                    for i, color_data in enumerate(colors[:5])
                }
            }
        }
    }

    return json.dumps(config, indent=2)
```

#### Export as Figma Design Tokens

```python
def export_figma_tokens(analysis_json):
    """Convert to Figma-compatible design tokens"""
    tokens = {
        "color": {},
        "spacing": {},
        "typography": {}
    }

    # Add colors
    colors = analysis_json['colors']['analysis']['most_common_colors']
    for i, color_data in enumerate(colors[:10]):
        tokens['color'][f'color-{i+1}'] = {
            "value": color_data['color'],
            "type": "color"
        }

    return json.dumps(tokens, indent=2)
```

---

## Advanced Topics

### Handling Dynamic Content

Some sites load content dynamically via JavaScript. To ensure accurate extraction:

```python
# Wait for specific selectors
await page.wait_for_selector('.main-content', timeout=10000)

# Wait for network to be idle
await page.wait_for_load_state('networkidle')

# Scroll to trigger lazy loading
await page.evaluate('window.scrollTo(0, document.body.scrollHeight)')
await page.wait_for_timeout(2000)  # Wait for lazy-loaded content
```

### Analyzing Responsive Designs

Capture multiple viewport sizes:

```python
viewports = [
    {"width": 375, "height": 812, "name": "mobile"},
    {"width": 768, "height": 1024, "name": "tablet"},
    {"width": 1920, "height": 1080, "name": "desktop"}
]

for viewport in viewports:
    await page.set_viewport_size({"width": viewport["width"], "height": viewport["height"]})
    await page.screenshot(path=f"screenshot_{viewport['name']}.png")
```

### Extracting Animation Data

```python
async def extract_transitions(page):
    """Extract CSS transition and animation properties"""
    animations = await page.evaluate("""
        () => {
            const data = {transitions: new Set(), animations: new Set()};
            const elements = document.querySelectorAll('*');

            elements.forEach(el => {
                const styles = window.getComputedStyle(el);
                if (styles.transition !== 'all 0s ease 0s') {
                    data.transitions.add(styles.transition);
                }
                if (styles.animation !== 'none') {
                    data.animations.add(styles.animation);
                }
            });

            return {
                transitions: Array.from(data.transitions),
                animations: Array.from(data.animations)
            };
        }
    """)
    return animations
```

---

## Troubleshooting Reference

For common issues and solutions, see `TROUBLESHOOTING.md`.

For security and privacy guidelines, see `SECURITY.md`.
